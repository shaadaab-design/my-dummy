<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Bunny Platformer</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.0/p5.js"></script>
  <style>
    body { margin: 0; overflow: hidden; background-color: #d0f0c0; }
    canvas { display: block; }
  </style>
</head>
<body>
  <script>
    let player;
    let ground;
    let platforms = [];
    let gravity = 1;
    let jumpPower = -15;
    let moveSpeed = 5;
    let canJump = false;
    let keys = {};
    let boxes = [];
    let cameraOffset = 0;

    function setup() {
      createCanvas(windowWidth, 600);

      player = {
        x: 50,
        y: 100,
        width: 40,
        height: 40,
        vx: 0,
        vy: 0
      };

      ground = {
        x: 0,
        y: height - 40,
        width: 4000,
        height: 40
      };

      platforms.push(ground);
      platforms.push({ x: 300, y: height - 120, width: 100, height: 20 });
      platforms.push({ x: 450, y: height - 200, width: 100, height: 20 });
      platforms.push({ x: 600, y: height - 280, width: 100, height: 20 });
      platforms.push({ x: 800, y: height - 300, width: 300, height: 20 });

      // Movable boxes
      boxes.push({ x: 1200, y: height - 80, width: 40, height: 40, vx: 0, vy: 0 });
      boxes.push({ x: 1300, y: height - 80, width: 40, height: 40, vx: 0, vy: 0 });
    }

    function draw() {
      background("#d0f0c0");

      cameraOffset = width / 2 - (player.x + player.width / 2);
      translate(cameraOffset, 0);

      // Draw ground/platforms
      fill("#654321");
      for (let plat of platforms) {
        rect(plat.x, plat.y, plat.width, plat.height);
      }

      // Draw boxes
      fill("#b5651d");
      for (let box of boxes) {
        rect(box.x, box.y, box.width, box.height);
      }

      // Apply gravity
      player.vy += gravity;
      player.y += player.vy;

      // Horizontal movement
      if (keys["ArrowRight"] || keys["d"]) player.vx = moveSpeed;
      else if (keys["ArrowLeft"] || keys["a"]) player.vx = -moveSpeed;
      else player.vx = 0;

      player.x += player.vx;

      // Platform collision
      canJump = false;
      for (let plat of platforms) {
        if (
          player.x < plat.x + plat.width &&
          player.x + player.width > plat.x &&
          player.y + player.height <= plat.y + 10 &&
          player.y + player.height + player.vy >= plat.y
        ) {
          player.y = plat.y - player.height;
          player.vy = 0;
          canJump = true;
        }
      }

      // Box collision and push
      for (let box of boxes) {
        box.vy += gravity;
        box.y += box.vy;

        for (let plat of platforms) {
          if (
            box.x < plat.x + plat.width &&
            box.x + box.width > plat.x &&
            box.y + box.height <= plat.y + 10 &&
            box.y + box.height + box.vy >= plat.y
          ) {
            box.y = plat.y - box.height;
            box.vy = 0;
          }
        }

        // Push interaction
        if (
          player.x + player.width > box.x &&
          player.x < box.x + box.width &&
          player.y + player.height > box.y &&
          player.y < box.y + box.height
        ) {
          if (player.vx > 0) box.x += moveSpeed;
          else if (player.vx < 0) box.x -= moveSpeed;
        }
      }

      // Draw bunny (simple design)
      fill("#ffc0cb"); // bunny color
      ellipse(player.x + player.width / 2, player.y + player.height / 2, player.width, player.height);
      fill("white");
      ellipse(player.x + player.width / 2 - 5, player.y + player.height / 2 - 20, 10, 20);
      ellipse(player.x + player.width / 2 + 5, player.y + player.height / 2 - 20, 10, 20);
    }

    function keyPressed() {
      keys[key] = true;
      if ((key === "w" || keyCode === UP_ARROW) && canJump) {
        player.vy = jumpPower;
      }
    }

    function keyReleased() {
      keys[key] = false;
    }
  </script>
</body>
</html>

