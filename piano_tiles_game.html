<!DOCTYPE html>
<html>
<head>
<style>
  canvas {
    background-color: #fff0f5;
    border-radius: 12px;
    border: 3px solid #ffb3d9;
  }
  #scoreDisplay {
    text-align: center;
    font-size: 18px;
    color: #8e44ad;
    margin-top: 10px;
  }
</style>
</head>
<body>
<canvas id="pianoCanvas" width="350" height="500"></canvas>
<div id="scoreDisplay">Score: 0</div>

<script>
const canvas = document.getElementById("pianoCanvas");
const ctx = canvas.getContext("2d");

const numCols = 4;
const tileWidth = canvas.width / numCols;
const tileHeight = 100;
let tiles = [];
let speed = 2;
let score = 0;
let gameOver = false;

function createTile() {
  const col = Math.floor(Math.random() * numCols);
  tiles.push({ x: col * tileWidth, y: -tileHeight });
}

function drawTiles() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);
  ctx.fillStyle = "#d63384";
  tiles.forEach(tile => {
    ctx.fillRect(tile.x, tile.y, tileWidth, tileHeight);
  });
}

function updateTiles() {
  tiles.forEach(tile => tile.y += speed);
  if (tiles.length === 0 || tiles[tiles.length - 1].y > tileHeight) {
    createTile();
  }
  if (tiles.some(tile => tile.y > canvas.height)) {
    gameOver = true;
    document.getElementById("scoreDisplay").textContent = `Game Over! Final Score: ${score}`;
  }
}

canvas.addEventListener("click", (e) => {
  if (gameOver) return;
  const rect = canvas.getBoundingClientRect();
  const x = e.clientX - rect.left;
  const y = e.clientY - rect.top;
  for (let i = 0; i < tiles.length; i++) {
    const tile = tiles[i];
    if (
      x > tile.x && x < tile.x + tileWidth &&
      y > tile.y && y < tile.y + tileHeight
    ) {
      tiles.splice(i, 1);
      score++;
      document.getElementById("scoreDisplay").textContent = `Score: ${score}`;
      break;
    }
  }
});

function gameLoop() {
  if (!gameOver) {
    drawTiles();
    updateTiles();
    requestAnimationFrame(gameLoop);
  }
}

createTile();
gameLoop();
</script>
</body>
</html>
